{% extends "blog/base.html" %}
{% load static %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}
<style>
  .container {
    max-width: 95%;
    padding-left: 10px;
    padding-right: 10px;
  }

  .row { margin-left: 0; margin-right: 0; }

  .col-md-8 { flex: 0 0 72%; max-width: 72%; }
  .col-md-4 { flex: 0 0 28%; max-width: 28%; }

  .title-heading {
    font-size: 2rem;
    font-weight: 700;
    color: #007bff;
    margin-bottom: 10px;
  }

  .post-meta { color: #6c757d; margin-bottom: 10px; }

  .badge { font-size: 0.85rem; padding: 0.4em 0.6em; }

  /* Image Styling */
  .card-img-top {
    width: 100%;
    height: auto;
    max-height: 500px;
    object-fit: cover;
    border-radius: 10px;
    margin-bottom: 20px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }

  /* Content Card Styling */
  .content-card {
    background-color: #ffffff;
    padding: 1.5rem;
    border-radius: 0.75rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    margin-top: 25px;
  }

  /* Video */
  .video-container iframe,
  .video-container video {
    width: 100%;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    margin-bottom: 20px;
  }

  .related-posts a { color: #0d6efd; text-decoration: underline; }

  @media (max-width: 768px) {
    .col-md-8, .col-md-4 { flex: 0 0 100%; max-width: 100%; }
    .card-img-top { max-height: 300px; }
  }
</style>

<div class="container py-5">
  <div class="row">
    <!-- Left Column -->
    <div class="col-md-8">

      <!-- Title -->
      <h2 class="title-heading">{{ post.title }}</h2>
      <p class="post-meta">Posted on {{ post.created_at|date:"F j, Y" }}</p>
      {% if post.category %}
        <span class="badge bg-secondary mb-3">{{ post.category.name }}</span>
      {% endif %}

      <!-- Featured Image -->
      {% if post.image %}
        <img src="{{ post.image.url }}" class="img-fluid card-img-top" alt="{{ post.title }}">
      {% endif %}

      <!-- ‚úÖ Content Inside a Card -->
      <div class="content-card">
        <h5 class="fw-bold text-dark">üìù Content</h5>
        <p class="lead">{{ post.content }}</p>
      </div>

      <!-- Related Posts -->
      {% if related_posts %}
        <div class="mt-4">
          <h5 class="text-primary">üîó Related Posts</h5>
          <ul class="ps-3">
            {% for related in related_posts %}
              <li>
                <a href="{% url 'blog1:post_detail' slug=related.slug %}" class="text-primary text-decoration-underline">
                  {{ related.title }}
                </a>
              </li>
            {% endfor %}
          </ul>
        </div>
      {% endif %}
    </div>

    <!-- Right Column: Video -->
    <div class="col-md-4">
      <h5 class="text-primary mb-3">üé• Related Video</h5>
      {% if post.video %}
        <div class="video-container">
          <video controls>
            <source src="{{ post.video.url }}" type="video/mp4">
            Your browser does not support the video tag.
          </video>
        </div>
      {% else %}
        <p class="text-muted">No video available for this post.</p>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
